---
import { ViewTransitions } from "astro:transitions";
import Header from "../components/Header.astro";
import Footer from "@/shared/components/Footer.astro";
import "@fontsource-variable/onest";
import "@fontsource/prompt/100.css";
import "@fontsource/prompt/500.css";

interface Props {
  description: string;
  title: string;
  currentLocale: string;
  language: string;
  bgImage?: string;
  bgClass?: string;
}

const { description, title, currentLocale, language, bgImage, bgClass } = Astro.props;
---

<!doctype html>
<html lang={currentLocale}>
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="robots" content="nofollow, noindex" />
    <title>{title}</title>
    <link
      rel="preload"
      href="/fonts/tomaso.woff2"
      as="font"
      type="font/woff2"
      crossorigin
    />
    <slot name="preload" />
    <ViewTransitions />
  </head>

  <body>
    {
      bgImage && (
        <img
          aria-hidden="true"
          src={bgImage}
          alt="Background image"
          class={`fixed w-full min-h-[40rem] lg:aspect-video mx-auto object-cover -z-10 ${bgClass}`}
        />
      )
    }
    <Header language={language} />
    <slot />
    <!-- <div id="loading">
      Loading...
    </div> -->
    <Footer language={language} />
    <style is:global>
      :root {
        color-scheme: dark;
      }

      @font-face {
        font-family: "Tomaso";
        font-style: normal;
        font-weight: normal;
        font-display: swap;
        src: url("/fonts/tomaso.woff2") format("woff2");
        unicode-range: U+0000-00FF, U+0131, U+0152-0153, U+02BB-02BC, U+02C6,
          U+02DA, U+02DC, U+0304, U+0308, U+0329, U+2000-206F, U+2074, U+20AC,
          U+2122, U+2191, U+2193, U+2212, U+2215, U+FEFF, U+FFFD;
      }

      html {
        font-family: "Onest Variable", system-ui, sans-serif;
        @apply bg-background;
        scroll-behavior: smooth;
      }

      h2 {
        font-family: "Prompt", system-ui, sans-serif;
        font-weight: 500;
      }

      p {
        color: rgba(255, 255, 255, 0.9);
        line-height: 1.4;
        margin-bottom: 1em;
        font-weight: 100;
        font-size: 1em;
        letter-spacing: 0.5px;
      }

      p strong {
        color: white;
        font-weight: 700;
      }

      .section-description p {
        margin-bottom: 0;
      }

      .text__glowing {
        transition: text-shadow 0.3s ease;
      }

      .text__glowing:hover {
        text-shadow:
          0 0 10px #fff,
          0 0 20px #fff,
          0 0 40px #fff,
          0 0 80px #fff,
          0 0 120px #fff;
      }

      a.text__min_glowing {
        transition: text-shadow 0.3s ease;
      }

      a.text__min_glowing:hover {
        text-shadow: 0 0 10px #fff;
      }

      .bg-pattern {
        --s: 86px; /* control the size */
        --a: 60deg; /* control the angle */

        --g: #0000 50%, #b7e4fd 51% 30%, #0000 31%;
        background:
          linear-gradient(var(--a), var(--g)),
          linear-gradient(calc(-1 * var(--a)), var(--g)) #151a36;
        background-size: var(--s) calc(tan(var(--a)) * var(--s));
      }

      #header-nav {
        animation: blur linear both;
        animation-timeline: scroll();
        animation-range: 0 500px;
      }

      .bg-main::before {
        content: "";
        @apply w-full;
        @apply h-20;
        background: linear-gradient(
          180deg,
          rgba(21, 26, 54, 0) 0%,
          rgba(21, 26, 54, 0.7) 34%,
          rgba(21, 26, 54, 1) 68%,
          rgba(21, 26, 54, 1) 100%
        );
        position: absolute;
        @apply -top-20;
      }

      @media (min-width: 1024px) {
        .bg-main::before {
          @apply h-64;
          @apply -top-64;
        }
      }

      /* #loading {
        position: fixed;
        z-index: 999;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        display: none;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        animation: blur linear both;
        @apply text-4xl text-white;
      }

      .show {
        display: flex!important;
      } */

      @keyframes blur {
        to {
          box-shadow:
            0px 5px 50px -5px rgba(0, 0, 0, 0.1),
            0px 0px 0 1px rgba(0, 0, 0, 0.3);
          background: rgba(0, 0, 0, 0.3);
          backdrop-filter: blur(10px);
        }
      }
    </style>
  </body><!-- <script is:inline>
  document.addEventListener('astro:before-preparation', () => {
    document.querySelector('#loading').classList.add('show');
  });
  document.addEventListener('astro:after-preparation', () => {
    document.querySelector('#loading').classList.remove('show');
  });
</script> -->
</html>
