---
import Layout from "@/shared/layouts/LayoutMx.astro"
import Video from "@/shared/components/Video.astro"
import Typography from "@/shared/components/ui/Typography.astro"
import SectionIntroMX from "@/shared/components/sections/SectionIntroMX.astro"
import SectionBentoMX from "@/shared/components/sections/SectionBentoMX.astro"
import SectionContact from "@/shared/components/sections/SectionContact.astro"
import SectionCourtMx from "@/shared/components/sections/SectionCourtMx.astro"
import SectionCanopies from "@/shared/components/sections/SectionCanopies.astro"
import SectionComplementsMX from "@/shared/components/sections/SectionComplementsMX.astro"
import SectionPartnerLogos from "@/shared/components/sections/SectionPartnerLogos.astro";
import { getI18N, getCurrentLocale, getCategoryByLanguage } from "@/shared/i18n"
import Gallery from "../Gallery.astro"
import NewsList from "../NewsList.astro"
import SectionGraphicProcessMX from "@/shared/components/sections/SectionGraphicProcessMX.astro"
import SectionInfiniteScroll from "@/shared/components/sections/SectionInfiniteScroll.astro"
import { type Photo } from "@/types/types.ts";
import HexagonCupLogo from "@/shared/components/logos/LogoHexagonCup.astro";
import SectionFaqs from "@/shared/components/sections/SectionFaqs.astro"
import NormativeLogosMX from "@/shared/components/sections/NormativeLogos.astro";
import Breadcrumb from "@/shared/components/Breadcrumb.astro";
import Slider from "@/shared/components/sections/Slider.astro";
import Button from "@/shared/components/Button.astro"
interface Props {
  language: string,
  projectsGallery: Photo[]
}

const { language, projectsGallery } = Astro.props
const i18n = getI18N({ language })
const currentLocale = getCurrentLocale({language})
const category = 59

const response = await fetch(`https://portico.porticosport.com/wp-json/wp/v2/posts?categories=${category}&per_page=15&_embed`)
// const response = await fetch(`https://portico.porticosport.com/wp-json/wp/v2/posts?per_page=6&_embed`)
const posts = await response.json();
---
<Layout title={i18n.PAGES.SECTION_MX.HOME.SEO_TITLE} robots="index,follow" contactForm description={i18n.PAGES.SECTION_MX.HOME.SEO_DESCRIPTION} currentLocale={currentLocale} language="es" >
<Video language="es" video="/portico-sport-home-video.mp4" subtitle={i18n.PAGES.SECTION_MX.HOME.SUBTITLE} title={i18n.PAGES.SECTION_MX.HOME.TITLE} buttonUrl={i18n.PAGES.SECTION_MX.HOME.CONTACT_BUTTON.URL} buttonText={i18n.PAGES.SECTION_MX.HOME.CONTACT_BUTTON.LABEL} language="es" classVideo="cp-elipse" subject={i18n.PAGES.HOME.CONTACT_SECTION.SUBJECT} uk>
    <div
      slot="bottom"
      class="absolute bottom-[10%] w-40 md:bottom-1/4 md:w-[200px] left-1/2 -translate-x-1/2 md:translate-x-0 md:left-10 z-10"
    >

      <div class="flex flex-col gap-2">
        <button id="logo-hexagon-cup">
          <HexagonCupLogo />
        </button>
      </div>
    </div>
  </Video>
<main>

    <SectionIntroMX language={language} />
<section 
      id={i18n.PAGES.SECTION_MX.PROJECTS_SECTION.ID}
    >
      <Typography tag="h2" text={i18n.PAGES.SECTION_MX.PROJECTS_SECTION.TITLE} className="mx-auto mt-10 mb-8 text-center font-semibold uppercase" />
      
    <Gallery
      heading={i18n.PAGES.SECTION_MX.PROJECTS_SECTION.TITLE_GALLERY}
      subheading={i18n.PAGES.SECTION_MX.PROJECTS_SECTION.SUBTITLE_GALLERY}
      id={i18n.PAGES.SECTION_MX.PROJECTS_SECTION.ID_GALLERY}
      photos={projectsGallery}
      offset={12}
      path={i18n.PAGES.SECTION_MX.PROJECTS_SECTION.PATH}
      urlButton={i18n.PAGES.SECTION_MX.PROJECTS_SECTION.URL.SRC}
      buttonTitle={i18n.PAGES.SECTION_MX.PROJECTS_SECTION.URL.TITLE}
      urlText={i18n.PAGES.SECTION_MX.PROJECTS_SECTION.URL.LABEL}
    />
     <div class="border-y border-primary mt-8 h-[600px] bg-center bg-cover" style={{backgroundImage: 'url("projects-map.webp")'}} />
    </section>
    <SectionGraphicProcessMX language={language} />
  <SectionInfiniteScroll language="es" />
    <SectionCourtMx language="es" />
    <NormativeLogosMX language={language} showInfo 
    title = { i18n.PAGES.SECTION_MX.NORMATIVE_SECTION_LOGOS.TITLE }
    subtitle = {i18n.PAGES.SECTION_MX.NORMATIVE_SECTION_LOGOS.SUBTITLE }
    description = {i18n.PAGES.SECTION_MX.NORMATIVE_SECTION_LOGOS.DESCRIPTION }
/>
  <SectionCanopies
      video="/cubiertas-spot.webm"
      subtitle={i18n.PAGES.SECTION_MX.CANOPIES_SECTION.SUBTITLE}
      title={i18n.PAGES.SECTION_MX.CANOPIES_SECTION.TITLE}
      text={i18n.PAGES.SECTION_MX.CANOPIES_SECTION.TEXT}
      buttonUrl={i18n.PAGES.SECTION_MX.CANOPIES_SECTION.URL}
      buttonText={i18n.PAGES.SECTION_MX.CANOPIES_SECTION.BUTTON_TEXT}
      buttonTitle={i18n.PAGES.SECTION_MX.CANOPIES_SECTION.BUTTON_TITLE}
    />

<SectionBentoMX language={language} />
    <SectionComplementsMX language={language} />
    <SectionFaqs items={i18n.PAGES.SECTION_MX.FAQS_SECTION.QUESTIONS} title={i18n.PAGES.SECTION_MX.FAQS_SECTION.TITLE} subtitle={i18n.PAGES.SECTION_MX.FAQS_SECTION.SUBTITLE} />
    <Slider language="es" posts={posts} />
<Section>
 
      <Typography tag="h2" className="mb-16 text-center font-bold" text={i18n.PAGES.SECTION_MX.COUNTRIES_SECTION.TITLE} />
   
      <Typography tag="div" className="mb-16 text-center" text={i18n.PAGES.SECTION_MX.COUNTRIES_SECTION.DESCRIPTION} />
    
      <Typography tag="div" type="primary" className="mb-16 text-center" text={i18n.PAGES.SECTION_MX.COUNTRIES_SECTION.SUBTTILE} />
    
    <div class=" justify-center items-center">
    <Button
      class="button"
      url={i18n.PAGES.MX.ROUTE.URL}
      target="_self"
      title="Fabricantes de canchas de padel Mexico"
    >
      {i18n.PAGES.MX.ROUTE.BREADCRUMB}
    </Button>
   
  </div>
   </Section>
  
  


    <SectionContact
      id={i18n.PAGES.SECTION_MX.CONTACT_SECTION.ID}
      hiddenSubject
      subject={i18n.PAGES.SECTION_MX.CONTACT_SECTION.SUBJECT}
      title={i18n.CONTACT_FORM.TITLE_MX}
      language="es"
      bgImage={i18n.PAGES.HOME.CONTACT_SECTION.BG_IMAGE}
      image={i18n.PAGES.HOME.CONTACT_SECTION.IMAGE}
      description={i18n.CONTACT_FORM.DESCRIPTION_MX}
    />
    <SectionPartnerLogos />
  </main>

</Layout>

<script>
  const logoHexagonCup = document.getElementById('logo-hexagon-cup');

  logoHexagonCup?.addEventListener('click', () => {
    window.open('https://www.hexagoncup.com/', '_blank');
  });

</script>

<style>

.button {
    width:100%;
    text-align: center;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 64px;
}
</style>
