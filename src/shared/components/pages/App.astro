---
import Layout from "@/shared/layouts/Layout.astro"
import Video from "@/shared/components/Video.astro"
import Intro from "@/shared/components/Intro.astro"
import Bento from "@/shared/components/Bento.astro"
import PreFooter from "@/shared/components/PreFooter.astro"
import Contact from "@/shared/components/Contact.astro"
import Courts from "@/shared/components/Courts.astro"
import projectsGallery from "@/shared/data/projects-gallery.json";
import { getI18N, getCurrentLocale } from "@/shared/i18n"
import Gallery from "../Gallery.astro"
import NewsList from "../NewsList.astro"
import GraphicProcess from "../GraphicProcess.astro"
import InfiniteScroll from "../InfiniteScroll.astro"

interface Props {
  language: string
}

const { language } = Astro.props
const i18n = getI18N({ language })
const currentLocale = getCurrentLocale({language})

const response = await fetch("https://porticosport.com/wp-json/wp/v2/posts?per_page=4&_embed")
const posts = await response.json();
---

<Layout title={i18n.SEO_TITLE} description={i18n.SEO_DESCRIPTION} currentLocale={currentLocale} language={language}>
  <link
    rel="preload"
    href="/fonts/jura.woff2"
    as="font"
    type="font/woff2"
    crossorigin
    slot="preload"
  />

  <Video language={language} />
  <main>
    <Intro language={language} />
    <GraphicProcess language={language} />
    <InfiniteScroll language={language} />
    <Courts language={language} />
    <Bento language={language} />
    <Gallery
      id={i18n.ROUTES.PROJECTS.ID}
      heading={i18n.INFO.PROJECTS_TITLE}
      subheading={i18n.INFO.PROJECTS_TEXT}
      photos={projectsGallery}
      path="projects"
      loadMoreText={i18n.INFO.BUTTON_TEXT}
    />
    <PreFooter language={language} />
    <NewsList language={language} posts={posts} />
    <Contact language={language} />
  </main>

</Layout>